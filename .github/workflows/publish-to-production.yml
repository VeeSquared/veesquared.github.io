name: publish to production

on: workflow_dispatch

jobs:
  build:

    runs-on: ubuntu-latest

    strategy:
      matrix:
        node-version: [18.x]

    steps:
    - name: Checkout veesquared.github.io
      uses: actions/checkout@v4
      with:
        repository: veesquared/veesquared.github.io
        token: ${{ secrets.GITHUB_TOKEN }}
        path: production
    - run: | 
        git config --global user.name "github-actions"
        git config --global user.email "12947066+VeeSquared@users.noreply.github.com"
        cd production
        git pull
        git switch production
        rm -r *
        cp -a ../. ./
        rm -R production
        git add .
        git commit -m "Automated Deploy to Staging - RunId-"${{ github.run_id }}
        git push  
